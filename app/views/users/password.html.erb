<div class="row">
	<h5 class="col s12">Validación de usuario</h5>
</div>
<div class="row">
	<form action="/users/login" method="post">
		<input type="hidden" name="authenticity_token" value="<%=form_authenticity_token%>">
		<div class="input-field col s8">
			<i class="material-icons prefix">email</i>
			<input name="user[mail]" type="text" placeholder="Correo">
		</div>
		<div class="input-field col s8" style="position: relative;">
			<i class="material-icons prefix">vpn_key</i>
				<input id="password-field" name="user[password]" type="password" placeholder="Contraseña2">
		</div>
		<div class="input-field col s8">
			<button class="btn-floating right" type="submit"><i class="material-icons">send</i></button>
		</div>

		<!-- Link a modal de “Olvidé mi contraseña” -->
		<div class="input-field col s8" style="margin-top:-10px">
		  <a href="#forgot-modal" class="modal-trigger" onclick="
		    var v=document.querySelector('input[name=&quot;user[mail]&quot;]').value;
		    var fe=document.getElementById('forgot-email'); if(v && fe) fe.value=v;
		  ">¿Olvidé mi contraseña?</a>
		</div>

	</form>
</div>



<!-- PASSWORD ERROR MODAL -->
<% if @password_error %>
	<div id="password-error-modal" class="modal">
		<div class="modal-content">
			<%= image_tag "optimized_logo.jpg", :class => "modal-logo"%>
			<p class="p20 slim">Lo sentimos. El correo o la contraseña no corresponden a ningún usuario registrado.</p>
		</div>
		<div class="modal-footer">
			<a href="#!" class="modal-close waves-effect waves-green btn-flat"><i class="material-icons small">close</i></a>
		</div>
	</div>
<% end %>

<script>
  function togglePassword() {
    var input = document.getElementById("password-field");
    var icon = event.target;
    if (input.type === "password") {
      input.type = "text";
      icon.textContent = "visibility_off";
    } else {
      input.type = "password";
      icon.textContent = "visibility";
    }
  }
</script>